<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Coinserver</title>
    <link rel="stylesheet" href="style.css">
	<!-- The following lines were generated by https://www.favicon-generator.org/ -->
	<link rel="apple-touch-icon" sizes="57x57" href="assets/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="assets/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="assets/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="assets/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="assets/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="assets/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="assets/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="assets/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="assets/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
	<link rel="manifest" href="assets/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="assets/favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">

  </head>
  <body>
    <nav>
      <button id="homenav">Home</button>
      <button id="singlenav">Flip one coin</button>
      <button id="multinav">Flip multiple coins</button>
      <button id="guessnav">Guess the result</button>

    </nav>
    
    <div id="home">
      <p>This site has three different games. Flip one coin will flip a coin and display the output: heads or tails. Flip multiple coins will ask for a certain number of coin flips and then flip that many coins and show you the results. Guess the result will ask you to pick heads or tails and then tell you id you were right or wrong.</p>
    </div>    
    
    <div id="single" class="hidden">
      <div class="space">
      </div>
      <button id="flipacoin" style="padding: 30px 10px;">Flip a coin!</button>

      <p id="singleResult">Result: </p>

      <img src="assets/img/coin.png" id="quarter">

      <script>
        document.getElementById("flipacoin").addEventListener("click", () => {
          fetch('http://localhost:5555/app/flip/one/', {mode: 'cors'})
          .then(function(response){
            return response.json()
          })
          .then(function(json){
            document.getElementById("singleResult").innerHTML = "Result: "+json["result"]
            document.getElementById("quarter").src = "assets/img/"+json["result"]+".png"
          })
        })
      </script>
    </div>


    <div id="multi" class="hidden">
      <div class="space">
      </div>
      <p>Please enter how many times you would like to flip the coin</p>
      <input id="multiinput" type="number">

      <p id="multiresult">Results: </p>
      <p id="multisummary">Summary: </p>

      <script>
        document.getElementById("multiinput").addEventListener("change", () => {
          urlString = 'http://localhost:5555/app/flip/coins/'+document.getElementById("multiinput").value.toString()

          fetch(urlString, {mode: 'cors'})
          .then(function(response){
            return response.json()
          })
          .then(function(json){
            document.getElementById("multiresult").innerHTML = "Results: "+json["raw"]
            document.getElementById("multisummary").innerHTML = "Summary "+JSON.stringify(json["summary"])
          })
        })
      </script>
    </div>


    <div id="guess" class="hidden">
      <div class="space">
      </div>

      <button id="guesshead" style="padding: 30px 10px;">Guess Heads</button>
      <button id="guesstails" style="padding: 30px 20px;">Guess Tails</button>
      
      <p id="playerguess">Your Guess:</p>
      <p id="coinresult">Coin Flip Result: </p>
      <p id="victorymessage"></p>

      <script>
        document.getElementById("guesshead").addEventListener("click", () => {
          fetch('http://localhost:5555/app/flip/call/heads')
          .then(function(response){
            return response.json()
          })
          .then(function(json){
            document.getElementById("playerguess").innerHTML = "Your Guess: "+json["call"]
            document.getElementById("coinresult").innerHTML = "Coin Flip Result: "+json["flip"]
            document.getElementById("victorymessage").innerHTML = "Game Outcome: "+json["result"]
          })
        })

        document.getElementById("guesstails").addEventListener("click", () => {
          fetch('http://localhost:5555/app/flip/call/tails')
          .then(function(response){
            return response.json()
          })
          .then(function(json){
            document.getElementById("playerguess").innerHTML = "Your Guess: "+json["call"]
            document.getElementById("coinresult").innerHTML = "Coin Flip Result: "+json["flip"]
            document.getElementById("victorymessage").innerHTML = "Game Outcome: "+json["result"]
          })
        })
      </script>
    </div>

    <script>

      function setActive(id){
        names = ["home","single","multi","guess"]

        for (const n of names){
          document.getElementById(n).classList.add("hidden")
        }

        document.getElementById(id).classList.remove("hidden")
      }

      const homeButton = document.getElementById("homenav")
      homeButton.addEventListener("click", () => {
        setActive("home")
      })

      const singleButton = document.getElementById("singlenav")
      singleButton.addEventListener("click", () => {
        setActive("single")
      })

      const multiButton = document.getElementById("multinav")
      multiButton.addEventListener("click", () => {
        setActive("multi")
      })

      const guessButton = document.getElementById("guessnav")
      guessButton.addEventListener("click", () => {
        setActive("guess")
      })


    </script>

	  <script src="main.js"></script>
  </body>
</html>
